<%# Note that subquestions here refers to multiple levels of a cascading select question, not question grouping. %>
<% qing.subquestions.each do |subq| %>
  <%= odk_input_tag(qing, subq, options) do %>
    <% if options[:appearance] == 'label' %>
      <label>Choices</label>
    <% else %>
      <label ref="jr:itext('<%= subq.odk_code %>:label')"/>
    <% end %>

    <%# Commcare doesn't like hints. %>
    <% unless style == 'commcare' %>
      <hint ref="jr:itext('<%= subq.odk_code %>:hint')"/>
    <% end %>

    <%# ODK wants the first-level options here for select questions, so we check if subq is first_rank. %>
    <%# Options from other levels go in itemsets.csv. %>
    <% if subq.has_options? && subq.first_rank? %>
      <% subq.option_set.children.each do |node| %>
        <item>
          <label ref="jr:itext('on<%= node.id %>')"/>
          <value>on<%= node.id %></value>
        </item>
      <% end %>
    <% end  %>
  <% end %>
<% end %>
