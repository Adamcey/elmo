<% unless empty_qing_group?(subtree) %>

  <% children = subtree.keys %>
  <% grid_mode = grid_mode?(children) %>

  <group appearance="field-list">

    <input ref="<%= "/data/grp-header#{group.id}"%>">
      <label ref="jr:itext('grp-header<%= group.id %>:label')"/>
      <hint ref="jr:itext('grp-header<%= group.id %>:hint')"/>
    </input>

    <%# In grid mode, we need to render a special label row that prints the available options at the top of the grid. %>
    <% if grid_mode %>
      <%= render('odk_questioning', qing: children.first, grid_mode: true, label_row: true) %>
    <% end %>

    <%# Render children. %>
    <% subtree.each do |item, subsubtree| %>
      <%= render('odk_questioning', qing: item, grid_mode: grid_mode) unless item.hidden %>
    <% end %>
  </group>
<% end %>
