<h:html xmlns="http://www.w3.org/2002/xforms" xmlns:h="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa">
  <h:head>
    <h:title><%= @form.name %></h:title>
    <model>
      <instance>
        <data id="<%= @form.temp_response_id %>">
          <% @form.questions.each do |q| %>
            <%= tag(q.code) %>
          <% end %>
        </data>
      </instance>
      <itext>
        <% Language.active.each do |lang| %>
          <translation lang="<%= lang.code %>">
          <% @form.questions.each do |q| %>
            <text id="/data/<%= q.code %>:label">
              <value><%= q.name(lang) %></value>
            </text>
            <text id="/data/<%= q.code %>:hint">
              <value><%= q.hint(lang) %></value>
            </text>
          <% end %>
          </translation>
        <% end %>
      </itext>
      <% @form.questions.each do |q| %>
        <bind nodeset="/data/<%= q.code %>" type="<%= q.type.odk_name %>"/>
      <% end %>
    </model>
  </h:head>
  <h:body>
    <% @form.questions.each do |q| %>
      <input ref="/data/<%= q.code %>">
        <label ref="jr:itext('/data/<%= q.code %>:label')"/>
        <hint ref="jr:itext('/data/<%= q.code %>:hint')"/>
      </input>
    <% end %>
  </h:body>
</h:html>